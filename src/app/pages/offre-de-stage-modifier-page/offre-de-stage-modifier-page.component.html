<ng-container *ngIf="offreDeStage$ | async as stage">
  <form [formGroup]="stageForm">
    <app-section-title
      title="Offre de stage"
      color="rouge"
      [subtitle]="stage.data!.title"
      [entreprise]="entrepriseName"
    ></app-section-title>

    <div class="btnGroup">
      <app-cancel-button></app-cancel-button>
      <app-save-button
        label="Sauvegarder"
        color="rouge"
        [onSubmit]="onSubmit"
      ></app-save-button>
    </div>

    <div class="details">
      <div class="description">
        <app-text-area
          label="Description de la tâche"
          color="rouge"
          [biggerLabel]="true"
          formControlName="description"
          [formErrorValidation]="
            getFormControl('description')!.invalid &&
            (getFormControl('description')!.dirty ||
              getFormControl('description')!.touched)
              ? 'Veuillez entrer des données valides'
              : ''
          "
        ></app-text-area>

        <div class="programWrapper">
          <app-input
            label="Programme de formation"
            formControlName="program"
          ></app-input>
        </div>
        <app-text-area
          label="Exigences"
          formControlName="requirements"
          [hasLeftBorder]="true"
          [formErrorValidation]="
            getFormControl('program')!.invalid &&
            (getFormControl('program')!.dirty ||
              getFormControl('program')!.touched)
              ? 'Veuillez entrer des données valides'
              : ''
          "
        ></app-text-area>
      </div>

      <p>Information sur le stage recherché</p>

      <div class="information">
        <app-select
          label="Type de stage"
          [options]="typeDeStage"
          [formGroup]="stageForm"
          controlName="stageType"
          [hasLeftBorder]="true"
          [formErrorValidation]="
            getFormControl('stageType')!.invalid &&
            (getFormControl('stageType')!.dirty ||
              getFormControl('stageType')!.touched)
              ? 'Veuillez entrer des données valides'
              : ''
          "
        ></app-select>
        <app-date-picker
          label="Date de début"
          [formGroup]="stageForm"
          controlName="startDate"
          [formErrorValidation]="
            getFormControl('stageType')!.invalid &&
            (getFormControl('stageType')!.dirty ||
              getFormControl('stageType')!.touched)
              ? 'Veuillez entrer des données valides'
              : ''
          "
        ></app-date-picker>
        <app-select
          label="Nombre d'heures par semaine"
          [formGroup]="stageForm"
          controlName="hoursPerWeek"
          [options]="nombreHeuresSemaine"
          [hasLeftBorder]="true"
          [formErrorValidation]="
            getFormControl('hoursPerWeek')!.invalid &&
            (getFormControl('hoursPerWeek')!.dirty ||
              getFormControl('hoursPerWeek')!.touched)
              ? 'Veuillez entrer des données valides'
              : ''
          "
        ></app-select>
        <app-date-picker
          label="Date de fin"
          [formGroup]="stageForm"
          controlName="endDate"
          [formErrorValidation]="
            getFormControl('endDate')!.invalid &&
            (getFormControl('endDate')!.dirty ||
              getFormControl('endDate')!.touched)
              ? 'Veuillez entrer des données valides'
              : ''
          "
        ></app-date-picker>
        <app-radio
          label="Rémunération"
          [formGroup]="stageForm"
          [options]="renumeration"
          controlName="paid"
          [formErrorValidation]="
            getFormControl('paid')!.invalid &&
            (getFormControl('paid')!.dirty || getFormControl('paid')!.touched)
              ? 'Veuillez entrer des données valides'
              : ''
          "
        ></app-radio>
      </div>

      <app-text-area
        label="Informations supplémentaires"
        color="rouge"
        formControlName="additionalInfo"
        [formErrorValidation]="
          getFormControl('additionalInfo')!.invalid &&
          (getFormControl('additionalInfo')!.dirty ||
            getFormControl('additionalInfo')!.touched)
            ? 'Veuillez entrer des données valides'
            : ''
        "
      ></app-text-area>
    </div>

    <div class="btnGroup">
      <app-cancel-button></app-cancel-button>
      <app-save-button
        label="Sauvegarder"
        color="rouge"
        [onSubmit]="onSubmit"
      ></app-save-button>
    </div>
  </form>
</ng-container>
