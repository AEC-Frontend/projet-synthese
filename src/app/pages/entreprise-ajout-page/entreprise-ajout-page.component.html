<div class="entrepriseAjout">
  <h2 class="entrepriseAjout__title">Ajouter une entreprise</h2>
  <form [formGroup]="entrepriseForm" (ngSubmit)="onSubmit()">
    <!-- Nom et poste -->
    <div class="entrepriseAjout__buttonGroup">
      <button
        class="entrepriseAjout__buttonGroup--cancel"
        routerLink="/tableau-de-bord"
        mat-stroked-button
      >
        Annuler
      </button>
      <button
        class="entrepriseAjout__buttonGroup--submit"
        type="submit"
        mat-flat-button
      >
        <mat-icon>save</mat-icon>
        <span *ngIf="!isLoading">Sauvegarder</span>
      </button>
    </div>
    <div class="entrepriseAjout__nameAndImage">
      <div class="entrepriseAjout__nameAndImage--textField">
        <label for="name">Entreprises</label>
        <mat-form-field
          appearance="outline"
          formControlName="name"
          ngDefaultControl
        >
          <input type="text" matInput />
        </mat-form-field>
        <div
          *ngIf="
            getFormControl('name')!.invalid &&
            (getFormControl('name')!.dirty || getFormControl('name')!.touched)
          "
          class="entrepriseAjout__error"
        >
          <div *ngIf="getFormControl('name')!.errors?.['required']">
            Ce champs est requis
          </div>
        </div>
      </div>
      <div class="entrepriseAjout__nameAndImage--textField">
        <label for="imageUrl">Logo</label>
        <mat-form-field
          appearance="outline"
          formControlName="imageUrl"
          ngDefaultControl
        >
          <input
            type="text"
            matInput
            placeholder="URL. Ex: https://nom-de-domaine.com"
          />
        </mat-form-field>
        <div
          *ngIf="
            getFormControl('imageUrl')!.invalid &&
            (getFormControl('imageUrl')!.dirty ||
              getFormControl('imageUrl')!.touched)
          "
          class="entrepriseAjout__error"
        >
          <div *ngIf="getFormControl('imageUrl')!.errors?.['required']">
            Ce champs est requis
          </div>
        </div>
      </div>
    </div>

    <!-- Informations détaillées -->
    <div class="entrepriseAjout__detailed">
      <div class="entrepriseAjout__description">
        <label for="description">Courte présentation</label>
        <mat-form-field
          appearance="outline"
          formControlName="description"
          ngDefaultControl
        >
          <textarea matInput width="100%"></textarea>
        </mat-form-field>
        <div
          *ngIf="
            getFormControl('description')!.invalid &&
            (getFormControl('description')!.dirty ||
              getFormControl('description')!.touched)
          "
          class="entrepriseAjout__error"
        >
          <div *ngIf="getFormControl('description')!.errors?.['required']">
            Ce champs est requis
          </div>
        </div>
      </div>

      <div class="entrepriseAjout__textField">
        <label for="contactName">Personne contact</label>
        <mat-form-field
          appearance="outline"
          formControlName="contactName"
          ngDefaultControl
        >
          <input type="text" matInput />
        </mat-form-field>
        <div
          *ngIf="
            getFormControl('contactName')!.invalid &&
            (getFormControl('contactName')!.dirty ||
              getFormControl('contactName')!.touched)
          "
          class="entrepriseAjout__error"
        >
          <div *ngIf="getFormControl('contactName')!.errors?.['required']">
            Ce champs est requis
          </div>
        </div>
      </div>

      <div class="entrepriseAjout__personalInfo">
        <p>Informations de contact</p>

        <div
          class="entrepriseAjout__textField"
          *ngFor="let textField of textFields"
        >
          <label [for]="textField.name">{{ textField.label }}</label>
          <mat-form-field
            appearance="outline"
            [formControlName]="textField.name"
            ngDefaultControl
          >
            <input type="text" matInput />
          </mat-form-field>
          <div
            *ngIf="
              getFormControl(textField.name)!.invalid &&
              (getFormControl(textField.name)!.dirty ||
                getFormControl(textField.name)!.touched)
            "
            class="entrepriseAjout__error"
          >
            <div *ngIf="getFormControl(textField.name)!.errors?.['required']">
              Ce champs est requis
            </div>
            <div *ngIf="getFormControl(textField.name)!.errors?.['email']">
              Vous devez entrer un courriel valide
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="entrepriseAjout__buttonGroup">
      <button
        class="entrepriseAjout__buttonGroup--cancel"
        routerLink="/tableau-de-bord"
        mat-stroked-button
      >
        Annuler
      </button>
      <button
        class="entrepriseAjout__buttonGroup--submit"
        type="submit"
        mat-flat-button
      >
        <mat-icon>save</mat-icon>
        <span *ngIf="!isLoading">Sauvegarder</span>
      </button>
    </div>
  </form>
</div>
